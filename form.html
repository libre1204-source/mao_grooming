<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>寵物美容預約系統 | Mao_Grooming</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: '微軟正黑體', serif; background-color: #D2CBBD; color: #333; }
        .section-padding { padding:60px 0 ; }/*表單與四周的距離*/
        .form-card { border: none; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }/*表單框*/
        .section-title { letter-spacing: 2px; padding-left: 15px; margin-bottom: 1.5rem; font-weight: 700; }/*四大標題*/
        .signature-pad { border: 2px dashed #ccc; border-radius: 5px; background: #fff; width: 100%; height: 200px; cursor: crosshair; }/*簽名框*/
        .modal-body-scroll { max-height: 400px; overflow-y: auto; font-size: 0.95rem; line-height: 1.6; }/*彈跳視窗的滾動*/
        /* 通用卡片樣式 */
.service-card {
    cursor: pointer;
    transition: all 0.2s ease;
    border: 2px solid #dee2e6;
    border-radius: 10px;
}

/* 隱藏原始 radio */
.service-option input[type="radio"]:checked + .service-card {
    border-color: #ffc107;
    background-color: #fffdf5;
}

/* 自定義圓點樣式 (與上方相同) */
.custom-radio {
    width: 20px;
    height: 20px;
    border: 2px solid #ccc;
    border-radius: 50%;
    flex-shrink: 0;
    position: relative;
}

.service-option input[type="radio"]:checked + .service-card .custom-radio {
    border-color: #ffc107;
    background-color: #ffc107;
}

.service-option input[type="radio"]:checked + .service-card .custom-radio::after {
    content: "";
    width: 8px;
    height: 8px;
    background: white;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* 其他項目輸入框的微調 */
.other-service-input-wrapper {
    padding-left: 36px; /* 讓文字框對齊上方標題 */
}

/* 未選中時輸入框半透明，選中時完全不透明 */
.service-option input[type="radio"] + .service-card input {
    opacity: 0.6;
}
.service-option input[type="radio"]:checked + .service-card input {
    opacity: 1;
    border-color: #ffc107;
}

.floating-back-home {/*右下返回首頁的圖示*/
    position: fixed;    /* 固定位置 */
    bottom: 20px;       /* 距離底部 20px */
    right: 20px;        /* 距離右邊 20px */
    width: 60px;        /* 寬度 60px */
    height: 60px;       /* 高度 60px */
    z-index: 9999;      /* 確保在所有圖層最上方 */
    transition: transform 0.3s ease, opacity 0.3s; /* 動態效果 */
    cursor: pointer;
    border-radius: 50%; /* 如果圖片是方的想變圓的可以加這行 */
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2); /* 增加陰影讓它浮起來 */
}

.floating-back-home img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* 確保圖片不變形 */
}

/* 滑鼠移上去的縮放效果 */
.floating-back-home:hover {
    transform: scale(1.1); /* 稍微放大 */
    opacity: 0.9;
}

/* 在手機版可以縮小一點點，避免擋住表單內容 */
@media (max-width: 576px) {
    .floating-back-home {
        width: 50px;
        height: 50px;
        bottom: 20px;
        right: 20px;
    }
}

/* 浮動按鈕通用樣式 */
.floating-btn {
    position: fixed;
    right: 20px;
    width: 50px; /* 稍微縮小一點點，讓兩個並列更美觀 */
    height: 50px;
    z-index: 9999;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    border: none;
}

/* 返回首頁位置 (最下方) */
.floating-home {
    bottom: 30px;
    background: #fff;
    overflow: hidden;
}
.floating-home img { width: 100%; height: 100%; object-fit: cover; }

/* 回到頂部位置 (在返回首頁上方) */
#backToTop {
    bottom: 90px; /* 30px + 60px + 15px 間距 */
    background-color: #333;
    color: white;
    opacity: 0; /* 預設隱藏 */
    visibility: hidden;
    cursor: pointer;
}

#backToTop.show {
    opacity: 1;
    visibility: visible;
}

.floating-btn:hover {
    transform: scale(1.1);
}
    </style>
</head>
<body>

<div class="container section-padding">
    <div class="row justify-content-center">
        <div class="col-lg-9">
            <div class="card form-card">
                <div class="card-body p-4 p-md-5">
                    <h2 class="text-center mb-5" id="backtop">美容洗澡服務線上契約</h2>

<button type="button" id="backToTop" class="floating-btn shadow">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
    </svg>
</button>
<a href="index.html" class="floating-back-home"><img src="LOGO.png" alt="返回首頁"></a>



                    <form action="https://formspree.io/f/mreeaage" method="POST" id="mainForm">




  
<button type="button" class="btn btn-sm btn-link text-secondary" onclick="localStorage.clear(); location.reload();">
    清除已儲存的個人資料
</button>                     
                        <h3 class="section-title text-primary" style="border-left: 5px solid #0d6efd;">一、飼主基本資料</h3>
                        <div class="row g-3 mb-4">
                            <div class="col-12">
                                <label class="form-label">電子郵件 * (寄送契約副本用)</label>
                                <input type="email" name="email" id="email" class="form-control" placeholder="example@mail.com" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">飼主姓名 *</label>
                                <input type="text" name="飼主姓名" id="飼主姓名" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">連絡電話 *</label>
                                <input type="tel" name="連絡電話" id="連絡電話" class="form-control" required>
                            </div>
                            <div class="col-12">
                                <label class="form-label">身分證字號 (非必填)</label>
                                <input type="text" name="身分證字號" id="身分證字號" class="form-control">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">緊急聯絡人姓名 *</label>
                                <input type="text" name="緊急聯絡人姓名" id="緊急聯絡人姓名" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">緊急連絡電話 *</label>
                                <input type="tel" name="緊急連絡電話" id="緊急連絡電話" class="form-control" required>
                            </div>
                        </div>

                        <h3 class="section-title text-success" style="border-left: 5px solid #198754;">二、寵物基本資料</h3>
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label">寵物姓名 *</label>
                                <input type="text" name="寵物姓名" id="寵物姓名" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">品種 *</label>
                                <input type="text" name="品種" id="品種" class="form-control" placeholder="例如：柴犬" required>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">性別 *</label>
                                <select name="寵物性別" id="寵物性別" class="form-select" required>
                                    <option value="">請選擇</option>
                                    <option value="公">公 (男生)</option>
                                    <option value="母">母 (女生)</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">是否結紮 *</label>
                                <select name="是否結紮" id="是否結紮" class="form-select" required>
                                    <option value="已結紮">已結紮</option>
                                    <option value="未結紮">未結紮</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">年齡 *</label>
                                <input type="text" name="寵物年齡" id="寵物年齡" class="form-control" placeholder="例如：3歲" required>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label d-block fw-bold">社交狀況 (可複選) *</label>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="社交狀況" value="有攻擊性" id="s1">
                                <label class="form-check-label" for="s1">有攻擊性</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="社交狀況" value="無攻擊性" id="s2">
                                <label class="form-check-label" for="s2">無攻擊性</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="社交狀況" value="可與狗朋友們一起玩耍" id="s3">
                                <label class="form-check-label" for="s3">可與狗朋友們一起玩耍</label>
                            </div>
<div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="社交狀況" value="不能與狗朋友們一起玩耍" id="s4">
                                <label class="form-check-label" for="s4">不能與狗朋友們一起玩耍</label>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">寵物美容性情與攻擊性評估 *</label>
                            <div class="form-check mb-2 small">
                                <input class="form-check-input" type="radio" name="性情評估" value="天使" id="e1" required>
                                <label class="form-check-label" for="e1"><strong>天使寶寶：</strong>溫和不怕生。</label>
                            </div>
                            <div class="form-check mb-2 small">
                                <input class="form-check-input" type="radio" name="性情評估" value="緊張" id="e2">
                                <label class="form-check-label" for="e2"><strong>有點緊張：</strong>可能低吼但未曾咬人。</label>
                            </div>
                            <div class="form-check mb-2 small">
                                <input class="form-check-input" type="radio" name="性情評估" value="攻擊紀錄" id="e3">
                                <label class="form-check-label" for="e3"><strong>恰北北/護主：</strong>曾有攻擊或試圖咬人紀錄。</label>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">晶片 *</label>
                            <select name="晶片狀況" class="form-select mb-2" id="chipSelect" onchange="toggleChipInput()" required>
                                <option value="">請選擇</option>
                                <option value="有晶片">有晶片</option>
                                <option value="有晶片(號碼不詳)">有晶片(號碼不詳)</option>
                                <option value="無晶片">無晶片</option>
                            </select>
                            <input type="text" name="晶片號碼" id="chipNumberInput" class="form-control" placeholder="請輸入晶片號碼" style="display:none;">
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">過往病史 (可複選) *</label>
                            <div class="row g-2 small">
                                <div class="col-6 col-md-4">
	<div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="無" id="h1"><label class="form-check-label" for="h1">無</label></div></div>
	<div class="col-6 col-md-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="白內障" id="h10"><label class="form-check-label" for="h10">白內障</label></div></div>
        <div class="col-6 col-md-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="氣喘" id="h2"><label class="form-check-label" for="h2">氣喘</label></div></div>
        <div class="col-6 col-md-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="氣管塌陷" id="h3"><label class="form-check-label" for="h3">氣管塌陷</label></div></div>
        <div class="col-6 col-md-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="心臟病" id="h4"><label class="form-check-label" for="h4">心臟病</label></div></div>
        <div class="col-6 col-md-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="癲癇" id="h5"><label class="form-check-label" for="h5">癲癇</label></div></div>
        <div class="col-6 col-md-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="心絲蟲" id="h6"><label class="form-check-label" for="h6">心絲蟲</label></div></div>
        <div class="col-6 col-md-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="艾利希體" id="h7"><label class="form-check-label" for="h7">艾利希體</label></div></div>
        <div class="col-6 col-md-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="手術外傷未癒合" id="h8"><label class="form-check-label" for="h8">手術外傷未癒合</label></div></div>
        <div class="col-6 col-md-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="病史" value="其他" id="h9"><label class="form-check-label" for="h9">其他</label></div></div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">指定就醫診療機構</label>
                            <input type="text" name="就醫機構" id="就醫機構" class="form-control" placeholder="若未填寫則送往鄰近醫院">
                        </div>

                        <h3 class="section-title text-warning" style="border-left: 5px solid #ffc107;">三、本次服務內容</h3>
                        <div class="mb-4">
    <label class="form-label fw-bold">服務項目 *</label>
    
    <div class="service-option mb-3">
        <input class="form-check-input d-none" type="radio" name="服務項目" id="service1" value="基礎洗澡" required>
        <label class="card service-card p-3" for="service1">
            <div class="d-flex align-items-center">
                <div class="custom-radio me-3"></div>
                <div>
                    <div class="fw-bold">基礎洗澡</div>
                    <div class="text-muted small">包含：二次洗毛+潤絲 · 剪指甲 · 清耳朵 · 剃腳底/肚子/肛門毛 · 擠肛門腺 · 眼部小修</div>
                </div>
            </div>
        </label>
    </div>

    <div class="service-option mb-3">
        <input class="form-check-input d-none" type="radio" name="服務項目" id="service2" value="精緻美容">
        <label class="card service-card p-3" for="service2">
            <div class="d-flex align-items-center">
                <div class="custom-radio me-3"></div>
                <div>
                    <div class="fw-bold">精緻美容</div>
                    <div class="text-muted small">包含：基礎洗澡內容 + 造型修剪</div>
                </div>
            </div>
        </label>
    </div>
    <div class="service-option mb-3">
        <input class="form-check-input d-none" type="radio" name="服務項目" id="service3" value="其他項目">
        <label class="card service-card p-3" for="service3">
            <div class="d-flex align-items-center mb-2">
                <div class="custom-radio me-3"></div>
                <div>
                    <div class="fw-bold">其他項目</div>
                </div>
            </div>
            <div class="other-service-input-wrapper mt-2">
                <input type="text" name="其他服務說明" class="form-control form-control-sm" placeholder="請詳細說明您需要的服務項目...">
            </div>
        </label>
    </div>

</div>

                        <h3 class="section-title text-danger" style="border-left: 5px solid #dc3545;">四、法律條款與數位簽署</h3>
                        <div class="mb-4">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="agree1" required disabled>
                                <label class="form-check-label" for="agree1">
                                    請點擊詳閱 <a href="#" data-bs-toggle="modal" data-bs-target="#modalTerms">【犬、貓美容契約條款】</a> *
                                </label>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="agree2" required disabled>
                                <label class="form-check-label" for="agree2">
                                    請點擊詳閱 <a href="#" data-bs-toggle="modal" data-bs-target="#modalRisk">【高風險寵物美容風險告知】</a> *
                                </label>
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-bold">最後請提供數位簽名 *</label>
                                <canvas id="signature-pad" class="signature-pad"></canvas>
                                <button type="button" class="btn btn-sm btn-outline-secondary mt-2" id="clear-sig">清除重簽</button>
                                <input type="hidden" name="數位簽名Base64" id="signature-data">
                            </div>
                        </div>

                        <div class="d-grid">
<button type="submit" class="btn btn-dark btn-lg py-3 shadow">確認並提交預約單</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalTerms" data-bs-backdrop="static" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-light"><h5>美容服務契約條款</h5></div>
            <div class="modal-body modal-body-scroll" id="termsBody">
                <p>

為保障寵物安全及服務品質，飼主預約本店任一服務前，請詳閱以下條款內容。當您預約，即視為已充分了解並同意遵守以下所有規定：</p>

<p><strong>一、共通條款</strong></p>
<p>1. 服務公約與付款：飼主已詳閱並充分瞭解本店美容之公約、計費方式及相關規則，並同意遵守與如實付款。</p>

<p>2. 聯絡資料正確性：本契約應記載之寵物、甲方及乙方之基本資料，詳如本契約附件之「犬、貓美容服務簽約前詢問事項及基本資料表」。所有附件及線上表單填寫內容均視為本契約之一部分。</p>

<p>3. 健康狀況誠實申報：飼主應詳盡且誠實申報寵物健康狀況及特殊需求(如特殊病史、過敏症狀、近期手術、攻擊性行為等)。因隱瞞或不實陳述造成之損害,飼主須負擔全部責任及賠償。即使飼主已誠實揭露犬/貓狀況,美容服務期間仍可能因犬/貓個體差異、體質或既有疾病,引發不可預測之反應或急性症狀(例如:突發性過敏、氣喘、癲癇、心臟病發作、虛脫、情緒失控等),如該形非可歸責於店家操作或人員疏失所致,本店不負任何賠償責任,相關醫療費用由飼主負擔。</p>

<p>4. 潛在健康風險認知：飼主了解服務期間可能存在潛在健康風險，寵物於服務期間或返家七日內若發生疾病或健康問題，本店不負相關責任。</p>

<p>5. 服務拒絕權利：本店保有接受或拒絕提供服務之最終權利，尤其當寵物患有傳染性疾病且未告知、攻擊性嚴重或需特殊醫療照護未告知時。</p>

<p>6. 資料變更通知義務：個人或緊急聯絡人資料變更後三日內，飼主應主動以本店任一聯絡方式通知本店，否則相關損失與責任由飼主自行負擔。</p>

<p><strong>二、服務項目與收費</strong></p>
<p><img src="price.png" width="95%"><br>
*收費以毛孩體重、體型、毛量、毛質為評估標準，現場報價為準。</p>

<p>特殊費用說明：<BR>

發現跳蚤/壁蝨：環境清潔費 150元 + 升級除蚤洗劑(150起)。<BR>
打結/廢毛：拆結費 200元起、廢毛處理費 100元起。<BR>
服務異議：美容服務完成後恕不接受異議、退款或補償。費用於施作前估價，並於當日支付。<BR>

攻擊行為：若過程中情緒過於緊張或有攻擊行為，將立即終止服務，不予收費。<BR></p>

<p>逾時收費：美容完成後應於三小時內接回，逾時依安親費收費 (未滿一小時以一小時計)：<BR>

狗狗：50元／時<BR>
貓咪：50元／時<BR>
營業時間結束後：若未接回且無法聯繫，將提供必要照護，飼主領回時須負擔安置費用。<BR></p>

<p>逾三日未接回：依《動物保護法》通報主管機關處理。</p>

<p><strong>三、健康與接待規定</strong></p>
<p>恕不接待：<BR>

未滿3個月、未打完三劑疫苗幼犬貓、接種疫苗一周內。<BR>
身上有活體寄生蟲。<BR>
心臟病、癲癇、傳染性疾病(貓瘟/愛滋/白血/黴菌等)、呼吸道疾病、腎臟病等。<BR>
美容當天若發現寄生蟲或傳染風險(打噴嚏/黴菌)，將退回並收取環境清潔費 1000元。<BR></p>

<p>若故意隱瞞攻擊行為導致人員受傷，須負責醫療費用。<BR></p>

<p><strong>四、其他條款</strong></p>
<p>1. 輕微剃傷：因不可抗力或毛孩不配合導致小於1公分淺表傷口，工作室將通知並消毒。飼主需於24小時內確認，逾期視同接受。若為操作疏失最高賠償 2000 元。</p>

<p>2. 緊急醫療：突發緊急狀況(休克/急病)且無法聯繫飼主時，將立即送醫。費用由甲方承擔。若因隱瞞病況發生意外，店家不負賠償責任。</p>

<p>3. 非醫療機構：本店不提供醫療診斷或投藥服務。</p>

<p><strong>五、個人資料保護政策</strong></p>
<p>飼主個資將用於美容服務、緊急聯繫及行銷推廣。未經同意不會轉售第三方。</p>

<p><strong>六、智慧財產權聲明</strong></p>
<p>同意本工作室拍攝照片/影片並無償使用於官網、官方社群媒體等行銷用途。若不同意請告知，則不會上傳。</p>

<p><strong>七、法律條款與爭議處理</strong></p>
<p>1. 爭議申訴：需於服務完成後七日內提出。可共同委託獸醫診斷，費用由提出方負擔。</p>

<p>2. 禁止不實言論：不得發布未經查證之負面評論，違者須賠償損失。</p>

<p>3. 管轄法院：雙方同意以臺灣新北地方法院為第一審管轄法院。</p>

<p>4. 監視器畫面：爭議發生後三日內可書面要求調閱。首次免費，額外拷貝收費 200 元。</p>

<p><strong>八、本同意書之修改</strong></p>
<p>修改內容將於官方 LINE 公告，繼續使用服務視為同意。</p>
                <div class="p-3 text-center text-danger fw-bold">--- 請滑動到底部以啟動同意按鈕 ---</div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="btnAcceptTerms" disabled>我已閱讀並同意</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalRisk" data-bs-backdrop="static" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-light"><h5>高風險寵物美容服務風險告知</h5></div>
            <div class="modal-body modal-body-scroll" id="riskBody">
                
<p><strong>一、飼主誠實告知義務</strong></p>

<p>本人（甲方）確認，已就本人所知悉之寵物年齡、過往病史（如心臟病、癲癇、氣喘、關節問題等）、近期手術或治療紀錄、懷孕狀況、過敏反應，以及行為特性（如咬人紀錄、特定部位敏感、抗拒保定等），向 貴店（乙方）為完整且真實之說明。</p>

<p>如因甲方未告知、未完全告知或提供不實資訊，致乙方於已盡合理專業注意義務之情形下，仍難以預見或防範風險發生者，其相關責任歸屬，雙方同意依實際情形及相關法律規定另行認定。</p>

<p><strong>二、高齡與特殊健康狀況之風險告知</strong></p>

<p>本人知悉，若寵物屬於高齡個體、幼齡犬貓，或患有慢性疾病、潛在或隱性疾病者，其體能、心肺功能及對壓力之耐受度，可能低於一般健康寵物。</p>

<p>於美容過程中之洗澡、吹整、保定或操作，可能因緊張、興奮或身體負荷，誘發身體不適、休克、舊疾復發，甚或發生其他不可預期之風險。</p>

<p>本人已充分理解上述情形，並同意：如經判定該不利結果係源於寵物自身健康狀況或生理反應，且非因乙方之故意或重大過失所致者，乙方不負損害賠償責任。</p>

<p><strong>三、攻擊性與行為安全防護同意</strong></p>

<p>如寵物於服務過程中出現高度緊張、攻擊行為、過度躁動或其他影響人員及寵物安全之情形，本人同意並授權乙方，基於安全考量，採取必要之防護與保定措施（包含但不限於牽繩保定、伊莉莎白頸圈、嘴套或雙人協同作業）。</p>

<p>若經專業判斷認為繼續服務恐危及寵物或人員安全，乙方得隨時中止服務，並依已完成之服務內容與進度計收費用。</p>

<p><strong>四、緊急醫療處置同意</strong></p>

<p>服務期間如寵物發生身體不適或緊急狀況，本人同意乙方得優先將寵物送往本人指定或就近之合適動物醫院進行緊急處置，相關醫療及必要交通費用，由本人依法負擔。</p>

<p><strong>五、飼主確認</strong></p>

<p>本人已詳閱並充分理解上述所有內容，確認已就相關風險獲得說明，並於審慎評估後，同意將寵物交付乙方進行美容服務。</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="btnAcceptRisk">我已充分理解並同意</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script>
    // 晶片切換
    function toggleChipInput() {
        const select = document.getElementById("chipSelect");
        const input = document.getElementById("chipNumberInput");
        input.style.display = (select.value === "有晶片") ? "block" : "none";
        input.required = (select.value === "有晶片");
    }

    // 條款滾動邏輯
    const termsBody = document.getElementById('termsBody');
    const btnAcceptTerms = document.getElementById('btnAcceptTerms');
    termsBody.onscroll = function() {
        if (termsBody.scrollHeight - termsBody.scrollTop <= termsBody.clientHeight + 10) {
            btnAcceptTerms.disabled = false;
        }
    };

    btnAcceptTerms.onclick = () => {
        document.getElementById('agree1').disabled = false;
        document.getElementById('agree1').checked = true;
        bootstrap.Modal.getInstance(document.getElementById('modalTerms')).hide();
    };

    document.getElementById('btnAcceptRisk').onclick = () => {
        document.getElementById('agree2').disabled = false;
        document.getElementById('agree2').checked = true;
        bootstrap.Modal.getInstance(document.getElementById('modalRisk')).hide();
    };

    // 簽名板邏輯
    const canvas = document.getElementById("signature-pad");
    const signaturePad = new SignaturePad(canvas);
    document.getElementById("clear-sig").onclick = () => signaturePad.clear();

    document.getElementById("mainForm").onsubmit = function(e) {
        if (signaturePad.isEmpty()) {
            alert("請完成數位簽名");
            e.preventDefault();
        } else {
            document.getElementById("signature-data").value = signaturePad.toDataURL();
        }
    };
</script>
<script>
    // 定義所有需要記憶的文字欄位 ID
    const textFields = [
        'email', '飼主姓名', '連絡電話', '身分證字號', '緊急聯絡人姓名', 
        '緊急連絡電話', '寵物姓名', '品種', '寵物年齡', '就醫機構', 'chipNumberInput'
    ];

    // 定義所有需要記憶的選擇欄位 (Select, Radio, Checkbox)
    // 注意：這裡直接抓取欄位的 id 或 name
    const choiceFields = [
        '寵物性別', '是否結紮', '晶片狀況', // Select
        's1', 's2', 's3', 's4',           // 社交狀況 Checkbox
        'e1', 'e2', 'e3',                 // 性情 Radio
        'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7', 'h8', 'h9', 'h10' // 病史 Checkbox
    ];

    // 1. 頁面載入時：自動填入舊資料
    window.addEventListener('load', function() {
        // 處理文字與下拉選單
        textFields.concat(['寵物性別', '是否結紮', '晶片狀況']).forEach(id => {
            const savedValue = localStorage.getItem(id);
            const element = document.getElementById(id);
            if (savedValue !== null && element) {
                element.value = savedValue;
            }
        });

        // 處理 Checkbox 與 Radio (根據 checked 狀態)
        choiceFields.forEach(id => {
            const savedValue = localStorage.getItem(id);
            const element = document.getElementById(id);
            if (element && (element.type === 'checkbox' || element.type === 'radio')) {
                element.checked = (savedValue === 'true');
            }
        });
        
        // 觸發顯示/隱藏邏輯
        if (typeof toggleChipInput === "function") {
            toggleChipInput();
        }
    });

    // 2. 表單提交時：儲存資料
    // 我們改用監聽 submit 事件來統一儲存
    document.getElementById("mainForm").addEventListener("submit", function() {
        // 儲存文字與下拉值
        textFields.concat(['寵物性別', '是否結紮', '晶片狀況']).forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                localStorage.setItem(id, element.value);
            }
        });

        // 儲存 Checkbox 與 Radio 的狀態
        choiceFields.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                localStorage.setItem(id, element.checked);
            }
        });
    });

</script>
<script>
    const backToTopBtn = document.getElementById("backToTop");

    // 監聽滾動事件
    window.onscroll = function() {
        // 當頁面下滑超過 300px 時顯示按鈕
        if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
            backToTopBtn.classList.add("show");
        } else {
            backToTopBtn.classList.remove("show");
        }
    };

    // 點擊事件：平滑滾動到頂部
    backToTopBtn.onclick = function() {
        window.scrollTo({
            top: 0,
            behavior: "smooth"
        });
    };
</script>
<script>document.getElementById('service3').addEventListener('change', function() {
    if (this.checked) {
        // 選中其他項目時，自動讓輸入框獲得焦點
        document.querySelector('input[name="其他服務說明"]').focus();
    }
});</script>
<script>var form = document.getElementById("mainForm");

async function handleSubmit(event) {
    event.preventDefault(); // 防止表單預設的跳轉行為
    
    // 如果你有簽名板，記得在送出前先處理簽名資料
    if (signaturePad && !signaturePad.isEmpty()) {
        document.getElementById("signature-data").value = signaturePad.toDataURL();
    } else {
        alert("請提供數位簽名");
        return;
    }

    var data = new FormData(event.target);
    
    // 使用 fetch 傳送資料到 Formspree
    fetch(event.target.action, {
        method: form.method,
        body: data,
        headers: {
            'Accept': 'application/json'
        }
    }).then(response => {
        if (response.ok) {
            // 成功後顯示訊息並跳轉
            alert("預約成功！即將返回首頁。");
            window.location.href = "index.html"; 
        } else {
            response.json().then(data => {
                if (Object.hasOwn(data, 'errors')) {
                    alert(data["errors"].map(error => error["message"]).join(", "));
                } else {
                    alert("哎呀！提交時發生錯誤，請稍後再試。");
                }
            })
        }
    }).catch(error => {
        alert("提交發生錯誤，請檢查網路連線。");
    });
}

form.addEventListener("submit", handleSubmit);</script>
</body>
</html>